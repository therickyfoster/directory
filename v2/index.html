<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Galactic Directory â€“ Sentinel Edition</title>
<meta name="description" content="Interactive, gamified directory for the Planetary Restoration Archive with constellation visuals, spaceships, XP, badges, and quests.">
<style>
  :root{
    --bg:#000308; --bg2:#030615; --panel:rgba(10,15,40,0.85); --ink:#f0f4ff; --muted:#a8c0e0;
    --accent:#5eb8ff; --accent2:#46ffb4; --warn:#ffa94d; --danger:#ff6b6b; --glow:#78d4ff;
    --good:#2dd4a0; --sentinel:#6ec8ff; --peace:#64ffda; --corrupt:#ff7ba3; --dash:#ffc966;
    --nebula1:#8b5cf6; --nebula2:#ec4899; --nebula3:#3b82f6; --star-glow:#ffeaa7;
  }
  
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;overflow-x:hidden}
  
  body{
    color:var(--ink); 
    background:#000;
    font:15px/1.6 'Inter', system-ui, -apple-system, sans-serif;
    position:relative;
  }

  /* Photorealistic Galaxy Background */
  #galaxy-bg{
    position:fixed; inset:0; z-index:-5;
    background: 
      radial-gradient(ellipse at 25% 25%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 75% 75%, rgba(236, 72, 153, 0.1) 0%, transparent 50%),
      radial-gradient(ellipse at 50% 50%, rgba(59, 130, 246, 0.08) 0%, transparent 70%),
      linear-gradient(180deg, #000308 0%, #030615 40%, #0a0f1a 100%);
  }

  #stars-layer, #nebula-layer, #constellation-layer{position:fixed; inset:0; pointer-events:none}
  #stars-layer{z-index:-4}
  #nebula-layer{z-index:-3; opacity:0.6; mix-blend-mode:screen}
  #constellation-layer{z-index:-2}

  /* Language Selector */
  .lang-selector{
    position:fixed; top:20px; right:20px; z-index:100;
    background:rgba(15,25,50,0.9); border:1px solid rgba(94,184,255,0.3);
    border-radius:12px; padding:8px; backdrop-filter:blur(10px);
  }
  .lang-selector select{
    background:transparent; color:var(--ink); border:none;
    font-size:14px; padding:4px 8px; cursor:pointer; outline:none;
  }
  .lang-selector select option{background:var(--bg2)}

  /* Header with glass morphism */
  header{
    position:sticky; top:0; z-index:10;
    background:linear-gradient(180deg,rgba(10,15,40,0.95),rgba(10,15,40,0.75));
    backdrop-filter:saturate(180%) blur(20px);
    border-bottom:1px solid rgba(94,184,255,0.2);
    box-shadow:0 8px 32px rgba(94,184,255,0.05);
  }
  
  .wrap{max-width:1200px; margin:0 auto; padding:20px}
  
  h1{
    margin:0 0 8px; font-size:28px; font-weight:700;
    background:linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    background-clip:text; text-shadow:0 0 40px rgba(94,184,255,0.4);
  }
  
  .sub{color:var(--muted); font-size:14px; opacity:0.9}
  
  /* HUD with enhanced effects */
  .hud{
    display:flex; gap:14px; align-items:center; flex-wrap:wrap; margin-top:14px
  }
  
  .chip{
    background:linear-gradient(135deg,rgba(15,25,50,0.8),rgba(10,20,40,0.9));
    border:1px solid rgba(94,184,255,0.25);
    padding:10px 14px; border-radius:999px;
    display:flex; gap:10px; align-items:center;
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.05), 0 4px 12px rgba(0,0,0,0.3);
  }
  
  .xpbar{
    height:12px; width:240px; border-radius:999px;
    background:rgba(10,15,30,0.8); border:1px solid rgba(94,184,255,0.2);
    overflow:hidden; position:relative;
  }
  .xpbar::before{
    content:''; position:absolute; inset:0;
    background:linear-gradient(90deg,transparent,rgba(255,255,255,0.1),transparent);
    animation:shimmer 3s infinite;
  }
  @keyframes shimmer{0%{transform:translateX(-100%)} 100%{transform:translateX(100%)}}
  
  .xpfill{
    height:100%; width:0%;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    box-shadow:0 0 20px var(--glow), inset 0 0 10px rgba(255,255,255,0.2);
    transition:width 0.6s cubic-bezier(0.4,0,0.2,1);
  }
  
  .badge{
    padding:4px 10px; border-radius:999px; font-size:11px;
    font-weight:600; letter-spacing:0.5px; text-transform:uppercase;
    border:1px solid; position:relative; overflow:hidden;
  }
  .badge::before{
    content:''; position:absolute; inset:0; opacity:0.15;
    background:linear-gradient(135deg,transparent 30%,rgba(255,255,255,0.4) 50%,transparent 70%);
    animation:badge-shine 3s infinite;
  }
  @keyframes badge-shine{0%{transform:translateX(-100%)} 100%{transform:translateX(100%)}}
  
  .b-sentinel{border-color:var(--sentinel); color:var(--sentinel); background:rgba(110,200,255,0.1)}
  .b-peace{border-color:var(--peace); color:var(--peace); background:rgba(100,255,218,0.1)}
  .b-corrupt{border-color:var(--corrupt); color:var(--corrupt); background:rgba(255,123,163,0.1)}
  .b-dash{border-color:var(--dash); color:var(--dash); background:rgba(255,201,102,0.1)}
  
  /* Controls */
  .controls{display:flex; gap:12px; margin-top:14px; flex-wrap:wrap}
  
  input[type="search"], select, button{
    background:rgba(10,20,40,0.8); color:var(--ink);
    border:1px solid rgba(94,184,255,0.2); border-radius:12px;
    padding:12px 16px; outline:none; transition:all 0.3s;
    backdrop-filter:blur(10px);
  }
  input[type="search"]{flex:1 1 340px}
  input[type="search"]:focus, select:hover, button:hover{
    border-color:rgba(94,184,255,0.5);
    box-shadow:0 0 20px rgba(94,184,255,0.1);
    background:rgba(15,30,60,0.85);
  }
  button{cursor:pointer; font-weight:500}
  button:active{transform:translateY(1px)}
  
  /* Main content */
  main{max-width:1280px; margin:24px auto 100px; padding:0 20px}
  
  .grid{
    display:grid; grid-template-columns:repeat(auto-fill,minmax(300px,1fr));
    gap:20px; margin-top:20px;
  }
  
  /* Cards with glass morphism */
  .card{
    background:linear-gradient(135deg,rgba(15,25,50,0.7),rgba(10,20,40,0.8));
    backdrop-filter:blur(10px);
    border:1px solid rgba(94,184,255,0.2);
    border-radius:20px; padding:20px; position:relative; overflow:hidden;
    transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
  }
  
  .card::before{
    content:''; position:absolute; inset:0; opacity:0;
    background:radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), rgba(94,184,255,0.06), transparent 40%);
    transition:opacity 0.3s;
  }
  .card:hover::before{opacity:1}
  .card:hover{
    transform:translateY(-4px) scale(1.02);
    border-color:rgba(94,184,255,0.4);
    box-shadow:0 20px 40px rgba(94,184,255,0.15), 0 0 60px rgba(94,184,255,0.05);
  }
  
  .title{
    font-weight:600; font-size:18px; color:#fff;
    margin:0 0 8px; word-break:break-word;
  }
  .path{color:var(--muted); font-size:13px; opacity:0.8; font-family:monospace}
  .desc{
    color:var(--muted); font-size:14px; margin:10px 0;
    line-height:1.5; min-height:40px;
  }
  
  .tags{margin-top:12px; display:flex; gap:8px; flex-wrap:wrap}
  
  .cta{margin-top:16px; display:flex; gap:10px; flex-wrap:wrap}
  .cta a, .cta button{
    text-decoration:none; padding:10px 16px; border-radius:12px;
    background:rgba(94,184,255,0.1); color:var(--accent);
    border:1px solid rgba(94,184,255,0.3); font-size:14px;
    font-weight:500; transition:all 0.3s;
  }
  .cta a:hover, .cta button:hover{
    background:rgba(94,184,255,0.2); border-color:rgba(94,184,255,0.5);
    box-shadow:0 0 20px rgba(94,184,255,0.2);
  }
  
  /* Special cards */
  .special{
    background:linear-gradient(135deg,rgba(30,40,80,0.8),rgba(20,30,60,0.9));
    border-color:rgba(94,184,255,0.4);
    box-shadow:0 0 30px rgba(94,184,255,0.1);
  }
  .special .title{
    background:linear-gradient(135deg,var(--accent),var(--accent2));
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;
    background-clip:text;
  }
  
  /* Category sections */
  details.category{
    background:linear-gradient(135deg,rgba(15,25,50,0.6),rgba(10,20,40,0.7));
    backdrop-filter:blur(10px);
    border:1px solid rgba(94,184,255,0.2);
    border-radius:20px; padding:16px 20px; margin:20px 0;
  }
  details>summary{
    cursor:pointer; list-style:none; user-select:none;
    font-weight:600; font-size:18px; color:var(--accent);
  }
  details>summary::-webkit-details-marker{display:none}
  details[open]{border-color:rgba(94,184,255,0.4)}
  
  /* Footer */
  footer{
    color:var(--muted); text-align:center; padding:40px 20px;
    background:linear-gradient(180deg,transparent,rgba(10,15,40,0.5));
  }
  
  /* Animated spaceships */
  .ship{
    position:fixed; width:40px; height:40px; pointer-events:none;
    opacity:0.7; z-index:1; filter:drop-shadow(0 0 10px var(--glow));
  }
  .ship svg{width:100%; height:100%}
  .ship path{stroke:var(--accent); fill:none; stroke-width:1.5; stroke-linecap:round}
  
  @keyframes cruise{
    0%{transform:translate(-100px, 0) rotate(0deg)}
    50%{transform:translate(calc(100vw + 100px), -20px) rotate(5deg)}
    100%{transform:translate(calc(200vw + 200px), 0) rotate(0deg)}
  }
  @keyframes float{
    0%, 100%{transform:translateY(0)}
    50%{transform:translateY(-15px)}
  }
  
  .ship1{top:15vh; animation:cruise 45s linear infinite, float 6s ease-in-out infinite}
  .ship2{top:40vh; animation:cruise 60s linear infinite reverse, float 8s ease-in-out infinite}
  .ship3{top:70vh; animation:cruise 52s linear infinite, float 7s ease-in-out infinite}

  /* Loading animation */
  .loading{
    position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:20px; color:var(--accent); z-index:1000;
  }

  .hide{display:none !important}
</style>
</head>
<body>
<div id="galaxy-bg"></div>
<canvas id="stars-layer"></canvas>
<canvas id="nebula-layer"></canvas>
<canvas id="constellation-layer"></canvas>

<!-- Language Selector -->
<div class="lang-selector">
  <select id="langSelect">
    <option value="en">ğŸŒ English</option>
    <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
    <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
    <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
    <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
    <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
    <option value="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
    <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
    <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
    <option value="ar">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
    <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
  </select>
</div>

<header>
  <div class="wrap">
    <h1 data-i18n="title">Galactic Directory â€“ <span style="color:var(--accent2)" data-i18n="subtitle">Sentinel Edition</span></h1>
    <div class="sub" data-i18n="tagline">Explore nodes, earn XP, unlock badges, and hold the line. (Local save; no tracking.)</div>
    <div class="hud">
      <div class="chip"><span data-i18n="level">Level</span> <strong id="lvl">1</strong></div>
      <div class="chip" style="gap:12px">
        <div class="xpbar"><div id="xpfill" class="xpfill"></div></div>
        <span><span id="xp">0</span> / <span id="xpcap">100</span> XP</span>
      </div>
      <div class="chip">
        <span class="badge b-sentinel">SENTINEL</span>
        <span class="badge b-peace">PEACE</span>
        <span class="badge b-corrupt">ANTI-CORRUPTION</span>
        <span class="badge b-dash">DASHBOARD</span>
      </div>
    </div>
    <div class="controls">
      <input id="search" type="search" placeholder="Search directories, tags, or pathsâ€¦" data-i18n-placeholder="searchPlaceholder">
      <select id="filter">
        <option value="" data-i18n="allCategories">All categories</option>
        <option value="Sentinel">Sentinel</option>
        <option value="Peace">Peace</option>
        <option value="Corruption">Corruption</option>
        <option value="Dashboard">Dashboards</option>
        <option value="Education">Education</option>
        <option value="Science">Science/Tech</option>
        <option value="Community">Community</option>
        <option value="Governance">Governance</option>
        <option value="Backups">Backups/Proof</option>
        <option value="Funding">Funding</option>
        <option value="Misc">Misc</option>
      </select>
      <button id="favoritesBtn" data-i18n="favorites">â­ Favorites</button>
      <button id="resetProg" data-i18n="resetProgress">Reset Progress</button>
    </div>
  </div>
</header>

<main>
  <details class="category" open>
    <summary data-i18n="featuredHubs">â­ Featured Hubs & Quests</summary>
    <div class="grid" id="featured"></div>
  </details>

  <details class="category" open>
    <summary data-i18n="allDirectories">ğŸŒŒ All Directories</summary>
    <div class="grid" id="grid"></div>
  </details>
</main>

<footer data-i18n="footer">
  Planetary Restoration Archive â€“ interactive directory. Be kind; be weird; build peace.
</footer>

<!-- Animated Spaceships -->
<div class="ship ship1">
  <svg viewBox="0 0 24 24"><path d="M2 12h8l2-3 2 6 4-3h4"/></svg>
</div>
<div class="ship ship2">
  <svg viewBox="0 0 24 24"><path d="M1 8h7l2-2 2 4 5-2h6"/></svg>
</div>
<div class="ship ship3">
  <svg viewBox="0 0 24 24"><path d="M0 16h9l2-4 2 5 6-1h5"/></svg>
</div>

<script>
// ===== Multi-language Support =====
const translations = {
  en: {
    title: "Galactic Directory â€“ ",
    subtitle: "Sentinel Edition",
    tagline: "Explore nodes, earn XP, unlock badges, and hold the line. (Local save; no tracking.)",
    level: "Level",
    searchPlaceholder: "Search directories, tags, or pathsâ€¦",
    allCategories: "All categories",
    favorites: "â­ Favorites",
    resetProgress: "Reset Progress",
    featuredHubs: "â­ Featured Hubs & Quests",
    allDirectories: "ğŸŒŒ All Directories",
    footer: "Planetary Restoration Archive â€“ interactive directory. Be kind; be weird; build peace.",
    open: "Open",
    favorite: "â˜† Favorite",
    unfavorite: "â˜… Unfavorite",
    confirmReset: "Reset XP, level, visited, favorites?",
    // Content descriptions
    sentinel_desc: "Guardian protocols and defensive systems for planetary protection",
    peace_desc: "Initiatives fostering harmony and collaborative solutions",
    corruption_desc: "Anti-corruption tools and transparency mechanisms",
    dashboard_desc: "Real-time monitoring and impact tracking interfaces",
    education_desc: "Learning resources and knowledge sharing platforms",
    science_desc: "Scientific innovations and technological breakthroughs",
    community_desc: "Community building and collective action networks",
    governance_desc: "Decentralized governance and decision-making frameworks",
    backups_desc: "Data preservation and proof verification systems",
    funding_desc: "Resource allocation and funding mechanisms",
    misc_desc: "Various tools and experimental projects"
  },
  es: {
    title: "Directorio GalÃ¡ctico â€“ ",
    subtitle: "EdiciÃ³n Centinela",
    tagline: "Explora nodos, gana XP, desbloquea insignias y mantÃ©n la lÃ­nea. (Guardado local; sin seguimiento.)",
    level: "Nivel",
    searchPlaceholder: "Buscar directorios, etiquetas o rutasâ€¦",
    allCategories: "Todas las categorÃ­as",
    favorites: "â­ Favoritos",
    resetProgress: "Reiniciar Progreso",
    featuredHubs: "â­ Centros y Misiones Destacadas",
    allDirectories: "ğŸŒŒ Todos los Directorios",
    footer: "Archivo de RestauraciÃ³n Planetaria â€“ directorio interactivo. SÃ© amable; sÃ© raro; construye la paz.",
    open: "Abrir",
    favorite: "â˜† Favorito",
    unfavorite: "â˜… No Favorito",
    confirmReset: "Â¿Reiniciar XP, nivel, visitados, favoritos?",
    sentinel_desc: "Protocolos guardianes y sistemas defensivos para la protecciÃ³n planetaria",
    peace_desc: "Iniciativas que fomentan la armonÃ­a y soluciones colaborativas",
    corruption_desc: "Herramientas anticorrupciÃ³n y mecanismos de transparencia",
    dashboard_desc: "Interfaces de monitoreo en tiempo real y seguimiento de impacto",
    education_desc: "Recursos de aprendizaje y plataformas para compartir conocimiento",
    science_desc: "Innovaciones cientÃ­ficas y avances tecnolÃ³gicos",
    community_desc: "ConstrucciÃ³n comunitaria y redes de acciÃ³n colectiva",
    governance_desc: "Gobernanza descentralizada y marcos de toma de decisiones",
    backups_desc: "Sistemas de preservaciÃ³n de datos y verificaciÃ³n de pruebas",
    funding_desc: "AsignaciÃ³n de recursos y mecanismos de financiaciÃ³n",
    misc_desc: "Varias herramientas y proyectos experimentales"
  },
  fr: {
    title: "RÃ©pertoire Galactique â€“ ",
    subtitle: "Ã‰dition Sentinelle",
    tagline: "Explorez les nÅ“uds, gagnez de l'XP, dÃ©bloquez des badges et tenez la ligne. (Sauvegarde locale; pas de suivi.)",
    level: "Niveau",
    searchPlaceholder: "Rechercher rÃ©pertoires, tags ou cheminsâ€¦",
    allCategories: "Toutes les catÃ©gories",
    favorites: "â­ Favoris",
    resetProgress: "RÃ©initialiser le ProgrÃ¨s",
    featuredHubs: "â­ Centres et QuÃªtes en Vedette",
    allDirectories: "ğŸŒŒ Tous les RÃ©pertoires",
    footer: "Archive de Restauration PlanÃ©taire â€“ rÃ©pertoire interactif. Soyez gentil; soyez bizarre; construisez la paix.",
    open: "Ouvrir",
    favorite: "â˜† Favori",
    unfavorite: "â˜… Retirer des Favoris",
    confirmReset: "RÃ©initialiser XP, niveau, visitÃ©s, favoris?",
    sentinel_desc: "Protocoles gardiens et systÃ¨mes dÃ©fensifs pour la protection planÃ©taire",
    peace_desc: "Initiatives favorisant l'harmonie et les solutions collaboratives",
    corruption_desc: "Outils anti-corruption et mÃ©canismes de transparence",
    dashboard_desc: "Interfaces de surveillance en temps rÃ©el et suivi d'impact",
    education_desc: "Ressources d'apprentissage et plateformes de partage de connaissances",
    science_desc: "Innovations scientifiques et percÃ©es technologiques",
    community_desc: "Construction communautaire et rÃ©seaux d'action collective",
    governance_desc: "Gouvernance dÃ©centralisÃ©e et cadres dÃ©cisionnels",
    backups_desc: "SystÃ¨mes de prÃ©servation des donnÃ©es et vÃ©rification des preuves",
    funding_desc: "Allocation des ressources et mÃ©canismes de financement",
    misc_desc: "Divers outils et projets expÃ©rimentaux"
  },
  zh: {
    title: "é“¶æ²³ç›®å½• â€“ ",
    subtitle: "å“¨å…µç‰ˆ",
    tagline: "æ¢ç´¢èŠ‚ç‚¹ï¼Œè·å¾—ç»éªŒå€¼ï¼Œè§£é”å¾½ç« ï¼Œå®ˆä½é˜²çº¿ã€‚ï¼ˆæœ¬åœ°ä¿å­˜ï¼›æ— è·Ÿè¸ªã€‚ï¼‰",
    level: "ç­‰çº§",
    searchPlaceholder: "æœç´¢ç›®å½•ã€æ ‡ç­¾æˆ–è·¯å¾„â€¦",
    allCategories: "æ‰€æœ‰ç±»åˆ«",
    favorites: "â­ æ”¶è—",
    resetProgress: "é‡ç½®è¿›åº¦",
    featuredHubs: "â­ ç²¾é€‰ä¸­å¿ƒä¸ä»»åŠ¡",
    allDirectories: "ğŸŒŒ æ‰€æœ‰ç›®å½•",
    footer: "è¡Œæ˜Ÿä¿®å¤æ¡£æ¡ˆ â€“ äº’åŠ¨ç›®å½•ã€‚å–„è‰¯ï¼›æ€ªå¼‚ï¼›å»ºè®¾å’Œå¹³ã€‚",
    open: "æ‰“å¼€",
    favorite: "â˜† æ”¶è—",
    unfavorite: "â˜… å–æ¶ˆæ”¶è—",
    confirmReset: "é‡ç½®ç»éªŒå€¼ã€ç­‰çº§ã€è®¿é—®è®°å½•ã€æ”¶è—ï¼Ÿ",
    sentinel_desc: "è¡Œæ˜Ÿä¿æŠ¤çš„å®ˆæŠ¤åè®®å’Œé˜²å¾¡ç³»ç»Ÿ",
    peace_desc: "ä¿ƒè¿›å’Œè°ä¸åä½œè§£å†³æ–¹æ¡ˆçš„å€¡è®®",
    corruption_desc: "åè…è´¥å·¥å…·å’Œé€æ˜æœºåˆ¶",
    dashboard_desc: "å®æ—¶ç›‘æ§å’Œå½±å“è·Ÿè¸ªç•Œé¢",
    education_desc: "å­¦ä¹ èµ„æºå’ŒçŸ¥è¯†å…±äº«å¹³å°",
    science_desc: "ç§‘å­¦åˆ›æ–°å’ŒæŠ€æœ¯çªç ´",
    community_desc: "ç¤¾åŒºå»ºè®¾å’Œé›†ä½“è¡ŒåŠ¨ç½‘ç»œ",
    governance_desc: "å»ä¸­å¿ƒåŒ–æ²»ç†å’Œå†³ç­–æ¡†æ¶",
    backups_desc: "æ•°æ®ä¿å­˜å’Œè¯æ˜éªŒè¯ç³»ç»Ÿ",
    funding_desc: "èµ„æºåˆ†é…å’Œèèµ„æœºåˆ¶",
    misc_desc: "å„ç§å·¥å…·å’Œå®éªŒé¡¹ç›®"
  },
  ja: {
    title: "éŠ€æ²³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª â€“ ",
    subtitle: "ã‚»ãƒ³ãƒãƒãƒ«ç‰ˆ",
    tagline: "ãƒãƒ¼ãƒ‰ã‚’æ¢ç´¢ã—ã€XPã‚’ç²å¾—ã—ã€ãƒãƒƒã‚¸ã‚’ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã—ã€ãƒ©ã‚¤ãƒ³ã‚’ä¿æŒã—ã¾ã™ã€‚ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ï¼›è¿½è·¡ãªã—ã€‚ï¼‰",
    level: "ãƒ¬ãƒ™ãƒ«",
    searchPlaceholder: "ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€ã‚¿ã‚°ã€ãƒ‘ã‚¹ã‚’æ¤œç´¢â€¦",
    allCategories: "ã™ã¹ã¦ã®ã‚«ãƒ†ã‚´ãƒª",
    favorites: "â­ ãŠæ°—ã«å…¥ã‚Š",
    resetProgress: "é€²è¡ŒçŠ¶æ³ã‚’ãƒªã‚»ãƒƒãƒˆ",
    featuredHubs: "â­ æ³¨ç›®ã®ãƒãƒ–ã¨ã‚¯ã‚¨ã‚¹ãƒˆ",
    allDirectories: "ğŸŒŒ ã™ã¹ã¦ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª",
    footer: "æƒ‘æ˜Ÿå¾©å…ƒã‚¢ãƒ¼ã‚«ã‚¤ãƒ– â€“ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€‚è¦ªåˆ‡ã«ï¼›å¥‡å¦™ã«ï¼›å¹³å’Œã‚’ç¯‰ãã€‚",
    open: "é–‹ã",
    favorite: "â˜† ãŠæ°—ã«å…¥ã‚Š",
    unfavorite: "â˜… ãŠæ°—ã«å…¥ã‚Šè§£é™¤",
    confirmReset: "XPã€ãƒ¬ãƒ™ãƒ«ã€è¨ªå•æ¸ˆã¿ã€ãŠæ°—ã«å…¥ã‚Šã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ",
    sentinel_desc: "æƒ‘æ˜Ÿä¿è­·ã®ãŸã‚ã®å®ˆè­·ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¨é˜²å¾¡ã‚·ã‚¹ãƒ†ãƒ ",
    peace_desc: "èª¿å’Œã¨å”åŠ›çš„ãªè§£æ±ºç­–ã‚’ä¿ƒé€²ã™ã‚‹ã‚¤ãƒ‹ã‚·ã‚¢ãƒãƒ–",
    corruption_desc: "åè…æ•—ãƒ„ãƒ¼ãƒ«ã¨é€æ˜æ€§ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ",
    dashboard_desc: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–ã¨å½±éŸ¿è¿½è·¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹",
    education_desc: "å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹ã¨çŸ¥è­˜å…±æœ‰ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ",
    science_desc: "ç§‘å­¦çš„é©æ–°ã¨æŠ€è¡“çš„ãƒ–ãƒ¬ãƒ¼ã‚¯ã‚¹ãƒ«ãƒ¼",
    community_desc: "ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ§‹ç¯‰ã¨é›†å›£è¡Œå‹•ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯",
    governance_desc: "åˆ†æ•£å‹ã‚¬ãƒãƒŠãƒ³ã‚¹ã¨æ„æ€æ±ºå®šãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯",
    backups_desc: "ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã¨è¨¼æ˜æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ ",
    funding_desc: "ãƒªã‚½ãƒ¼ã‚¹é…åˆ†ã¨è³‡é‡‘èª¿é”ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ",
    misc_desc: "ã•ã¾ã–ã¾ãªãƒ„ãƒ¼ãƒ«ã¨å®Ÿé¨“çš„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ"
  }
};

let currentLang = 'en';

function setLanguage(lang) {
  currentLang = lang;
  const t = translations[lang] || translations['en'];
  
  // Update all elements with data-i18n attribute
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (t[key]) {
      if (el.tagName === 'INPUT' || el.tagName === 'SELECT') {
        el.placeholder = t[key];
      } else {
        el.textContent = t[key];
      }
    }
  });
  
  // Update placeholders
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    if (t[key]) el.placeholder = t[key];
  });
  
  // Re-render to update dynamic content
  renderAll(filter.value, search.value, favBtn.classList.contains('on'));
  renderFeatured();
  
  // Save language preference
  localStorage.setItem('galactic_lang', lang);
}

// ===== Photorealistic Galaxy Canvas =====
(function initGalaxy(){
  const stars = document.getElementById('stars-layer');
  const nebula = document.getElementById('nebula-layer');
  const constellations = document.getElementById('constellation-layer');
  
  const DPR = Math.min(2, window.devicePixelRatio || 1);
  let W = innerWidth, H = innerHeight;
  
  function resizeCanvas() {
    W = innerWidth; H = innerHeight;
    [stars, nebula, constellations].forEach(c => {
      c.width = W * DPR; c.height = H * DPR;
      c.style.width = W + 'px'; c.style.height = H + 'px';
    });
  }
  resizeCanvas();
  window.addEventListener('resize', resizeCanvas);
  
  const sCtx = stars.getContext('2d');
  const nCtx = nebula.getContext('2d');
  const cCtx = constellations.getContext('2d');
  
  // Generate stars with varying sizes and brightness
  const STAR_COUNT = Math.min(800, Math.floor(W * H / 2000));
  const starField = Array.from({length: STAR_COUNT}, () => ({
    x: Math.random() * W,
    y: Math.random() * H,
    r: Math.random() * 2 + 0.1,
    brightness: Math.random(),
    twinkle: Math.random() * Math.PI * 2,
    speed: Math.random() * 0.02 + 0.01
  }));
  
  // Constellation points
  const constellationGroups = [];
  for (let i = 0; i < 8; i++) {
    const group = [];
    const centerX = Math.random() * W;
    const centerY = Math.random() * H;
    const pointCount = Math.floor(Math.random() * 4) + 4;
    for (let j = 0; j < pointCount; j++) {
      group.push({
        x: centerX + (Math.random() - 0.5) * 200,
        y: centerY + (Math.random() - 0.5) * 200,
        connected: []
      });
    }
    // Connect nearby stars
    for (let j = 0; j < pointCount; j++) {
      for (let k = j + 1; k < pointCount; k++) {
        const dist = Math.hypot(group[j].x - group[k].x, group[j].y - group[k].y);
        if (dist < 120 && Math.random() > 0.3) {
          group[j].connected.push(k);
        }
      }
    }
    constellationGroups.push(group);
  }
  
  // Animation loop
  let frame = 0;
  function animate() {
    frame += 0.01;
    
    // Clear canvases
    sCtx.clearRect(0, 0, W * DPR, H * DPR);
    nCtx.clearRect(0, 0, W * DPR, H * DPR);
    cCtx.clearRect(0, 0, W * DPR, H * DPR);
    
    // Draw stars
    sCtx.save();
    sCtx.scale(DPR, DPR);
    starField.forEach(star => {
      star.twinkle += star.speed;
      const alpha = 0.4 + 0.6 * Math.sin(star.twinkle) * star.brightness;
      const glow = star.r > 1 ? star.r * 3 : 0;
      
      if (glow > 0) {
        const gradient = sCtx.createRadialGradient(star.x, star.y, 0, star.x, star.y, glow);
        gradient.addColorStop(0, `rgba(255, 255, 255, ${alpha})`);
        gradient.addColorStop(0.5, `rgba(200, 220, 255, ${alpha * 0.3})`);
        gradient.addColorStop(1, 'rgba(100, 150, 255, 0)');
        sCtx.fillStyle = gradient;
        sCtx.fillRect(star.x - glow, star.y - glow, glow * 2, glow * 2);
      }
      
      sCtx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
      sCtx.beginPath();
      sCtx.arc(star.x, star.y, star.r, 0, Math.PI * 2);
      sCtx.fill();
    });
    sCtx.restore();
    
    // Draw nebula clouds
    nCtx.save();
    nCtx.scale(DPR, DPR);
    nCtx.globalCompositeOperation = 'screen';
    
    for (let i = 0; i < 3; i++) {
      const x = W * 0.5 + Math.sin(frame * 0.2 + i) * 100;
      const y = H * 0.5 + Math.cos(frame * 0.15 + i) * 100;
      
      const gradient = nCtx.createRadialGradient(x, y, 0, x, y, 300);
      const colors = [
        ['139, 92, 246', '236, 72, 153'],
        ['59, 130, 246', '147, 51, 234'],
        ['236, 72, 153', '251, 146, 60']
      ][i];
      
      gradient.addColorStop(0, `rgba(${colors[0]}, 0.15)`);
      gradient.addColorStop(0.5, `rgba(${colors[1]}, 0.08)`);
      gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
      
      nCtx.fillStyle = gradient;
      nCtx.fillRect(0, 0, W, H);
    }
    nCtx.restore();
    
    // Draw constellations
    cCtx.save();
    cCtx.scale(DPR, DPR);
    cCtx.strokeStyle = 'rgba(94, 184, 255, 0.2)';
    cCtx.lineWidth = 1;
    
    constellationGroups.forEach(group => {
      // Draw connections
      group.forEach((point, i) => {
        point.connected.forEach(targetIndex => {
          const target = group[targetIndex];
          cCtx.beginPath();
          cCtx.moveTo(point.x, point.y);
          cCtx.lineTo(target.x, target.y);
          cCtx.stroke();
        });
      });
      
      // Draw constellation stars
      group.forEach(point => {
        const pulse = 0.6 + 0.4 * Math.sin(frame * 2 + point.x * 0.01);
        cCtx.fillStyle = `rgba(150, 200, 255, ${pulse})`;
        cCtx.beginPath();
        cCtx.arc(point.x, point.y, 2, 0, Math.PI * 2);
        cCtx.fill();
      });
    });
    cCtx.restore();
    
    requestAnimationFrame(animate);
  }
  animate();
})();

// ===== Directory Data =====
const DIRS = [
  "/inspiration","/donate","/foster","/ymm",
  "/aeroglass-window-film","/ai-collective-governance-architectures",
  "/ai-support-site","/aifinalwarning","/aistreamcoach","/alberta",
  "/animagenesiscore","/anti-collapse-sentinel","/anti-corruption.html",
  "/apps","/aquabloombottlegarden","/ardrivedesktop","/ashalertapp",
  "/ashenbloom","/auroraspirenetwork","/autoipsuite",
  "/autonomous-ai-planetary-repair-dao","/backup","/biocoolpillow",
  "/biofoambiobreaks","/bioglowtiles","/biotech","/blood-moon","/brief",
  "/bubble","/bulldog","/buymeacoffeesymbiote","/carney","/cascadulator",
  "/chat","/chat2","/cityscanner","/cloudnest","/collective","/comms",
  "/community","/conditional-immutable-storage","/continuity","/contracts",
  "/corruption","/corruption.zip","/crypto","/dact","/dact-impact-proposal",
  "/dashboard","/ddd","/ddd-deployer","/debrief","/declaration","/deploy",
  "/dgn","/digital","/dockerifyandroid","/donationworthydevs",
  "/donor-intent-router","/donorintentrouter","/eclipseraveil",
  "/ecobreathpurifier","/ecocoolshingles","/economic","/ecowaveshowerhead",
  "/edencore","/education","/education2","/emotionalalchemygame","/engine",
  "/entropy","/fieldkit","/firehalo","/firepreventionsystems",
  "/flourishingearthprotocolpackage","/forge-overlay-core.js",
  "/forgivenessispower","/fortmacorchard","/fortmcmurraywildcall",
  "/fostersforge","/fractalvinerail","/freshfloortiles","/funding",
  "/fundinginfluxpipeline","/futurescape","/galaxy",
  "/gamification-engine-standalone","/gaming","/gateway","/gen",
  "/geoecologicalresonantengineering","/global","/globalnotarization",
  "/globalsymbioteledger","/glowrootplanter","/goseedbike","/gov",
  "/government","/guardiantrustmodel","/help","/herolens","/herolens2",
  "/home_page","/honorlearningcodex","/hostanode","/hydromossmat",
  "/immusion","/impacttracker","/index","/index-legacy.html","/index.html",
  "/index001.html","/infographic","/intergenerationalwisdommovement","/ip",
  "/japan","/kindnesswinsengine","/kinship","/leaderboards","/licensing",
  "/lightforge","/location","/logs","/loopfall","/lumatideoceanrings",
  "/master_prompts","/med-neg.html","/meta","/mindmaps",
  "/missionfuelfunders","/models","/multiagentgnosistawskforce","/musk",
  "/mycelialenhancementv2","/myco-atmospheric-network","/myco-filter-tiles",
  "/mycoigloo","/mycomistreforestationpods","/mythbridge",
  "/narrativereframing","/naturetoaitranslator","/next","/nextgen",
  "/nextgenbrowsertools","/nullisprismnexus","/offgridpower",
  "/offgridpowermesh","/one-game","/ontology","/opengamifyedu","/openstay",
  "/openstay2.0","/openstore","/openstore2.0","/originsingularityforge",
  "/overlay","/particulateremovalskies","/passivewindtowaterharvester",
  "/path","/peace","/peace-lab","/peace-ripple-tracker",
  "/peacerippletracker","/perpetualrestoration","/personafication","/pgp",
  "/phasedrive","/planetary-repair-agent-swarm",
  "/planetary-restoration-archive","/planetary-restoration-os",
  "/postfiresoilrebuilder","/praportal.html","/prime","/prime-sentinel",
  "/primordis-architect","/progenitor","/progenitor-steward-cleanup-sim",
  "/project","/projectcoherence","/prompt","/promptpacks","/proof",
  "/proof-of-possibility","/proof_runner.sh","/proofkit","/proposal",
  "/public","/publicresumepack","/puremist-bottle","/ref","/reforestation",
  "/regen","/regenerative-convergence-opportunities",
  "/regenerative-innovations","/regenerative_education_research_paper1",
  "/registry","/roadlight","/roadmap","/romarineconcrete","/root",
  "/safe_archiving_method","/saltflip","/scaffolding","/sentinel",
  "/sentinelarc","/signal","/skyharvestlantern","/solarweavecanopy",
  "/spiralliftpod","/start-here","/stateofaffairspublicnotice",
  "/stellar-loom-gateways","/stratoweave-towers","/sunset",
  "/support_request_v2.html","/sym","/symbiote001","/symbiotecirclemap",
  "/symbioteone-orchestrator","/symbioteorchestratorrequest",
  "/symfungi-shield","/the-paradox-seed","/the_last_protocol",
  "/therickyfoster","/therickyfoster.github.io","/thermaleaf-panels",
  "/tight","/trolls","/truthreport","/unified-ontology","/vascusweep",
  "/vascusweep-tower","/vehicleemotiontether","/veiltext","/waverider",
  "/why","/wizard"
];

// ===== Tagging & Description Logic =====
function tagFor(name) {
  const n = name.toLowerCase();
  const tags = [];
  if (/(^|\/)(sentinel|prime-sentinel|sentinelarc)\b/.test(n)) tags.push("Sentinel");
  if (/(^|\/)(peace|peace\-lab|peace\-ripple\-tracker|peacerippletracker)\b/.test(n)) tags.push("Peace");
  if (/corruption|\banti-corruption|stateofaffairs|truthreport/.test(n)) tags.push("Corruption");
  if (/(dashboard|leaderboards|impacttracker)/.test(n)) tags.push("Dashboard");
  if (/education|honorlearning|opengamify|gamification|learning|education2/.test(n)) tags.push("Education");
  if (/eco|solar|myco|bio|hydro|reforestation|postfiresoil|romarine|thermaleaf|stratoweave|spirallift|waverider|fract|phasedrive|vascusweep|engine|models|lab|field|device|showerhead|tiles|canopy|lantern|ocean|filter|moss|igloo|freshfloor|planter/.test(n)) tags.push("Science");
  if (/community|collective|comms|forum|chat|city|kinship|global|symbiote|registry|roadlight|openstay|openstore|start\-here|publicresumepack/.test(n)) tags.push("Community");
  if (/gov|government|guardiantrust|policy|declaration|proposal|registry|unified\-ontology|ai\-collective\-governance|planetary\-repair\-agent\-swarm/.test(n)) tags.push("Governance");
  if (/backup|logs|proof|safe_archiving|globalnotarization|conditional\-immutable\-storage|checksums|\.ots|\.zip$|index\-legacy\.html|index001\.html/.test(n)) tags.push("Backups");
  if (/funding|donor|buymeacoffee|missionfuel|donate/i.test(name)) tags.push("Funding");
  if (!tags.length) tags.push("Misc");
  return tags;
}

function getDescription(path, tags) {
  const t = translations[currentLang] || translations['en'];
  const primaryTag = tags[0];
  const descKey = primaryTag.toLowerCase() + '_desc';
  return t[descKey] || t.misc_desc;
}

// ===== Storage & State Management =====
const store = {
  get() { 
    try { return JSON.parse(localStorage.getItem('galactic_dir') || '{}'); } 
    catch(e) { return {}; }
  },
  set(v) { localStorage.setItem('galactic_dir', JSON.stringify(v)); }
};

const state = Object.assign({xp: 0, lvl: 1, favs: {}, visited: {}}, store.get());
const XP_PER_VISIT = 5;
const XP_SENTINEL_BONUS = 15;
const XP_PEACE_BONUS = 10;
const XP_CORR_BONUS = 10;
const XP_DASH_BONUS = 8;

function capForLevel(l) { return 100 + (l - 1) * 50; }

function addXP(n) {
  state.xp += n;
  while (state.xp >= capForLevel(state.lvl)) {
    state.xp -= capForLevel(state.lvl);
    state.lvl++;
  }
  persist();
  renderHUD();
}

function persist() { store.set(state); }

function renderHUD() {
  document.getElementById('lvl').textContent = state.lvl;
  document.getElementById('xp').textContent = Math.floor(state.xp);
  document.getElementById('xpcap').textContent = capForLevel(state.lvl);
  const xpFill = document.getElementById('xpfill');
  xpFill.style.width = (state.xp / capForLevel(state.lvl) * 100) + '%';
}

// ===== Card Creation =====
function mkEl(tag, cls, txt) {
  const e = document.createElement(tag);
  if (cls) e.className = cls;
  if (txt) e.textContent = txt;
  return e;
}

function urlTitle(p) { 
  return p.replace(/^\//, '').replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase()) || '/'; 
}

function cardFor(path) {
  const tags = tagFor(path);
  const t = translations[currentLang] || translations['en'];
  const isSpecial = tags.some(tag => ['Sentinel', 'Peace', 'Corruption', 'Dashboard'].includes(tag));
  
  const card = mkEl('div', 'card' + (isSpecial ? ' special' : ''));
  
  // Add mouse tracking for glow effect
  card.addEventListener('mousemove', (e) => {
    const rect = card.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    card.style.setProperty('--mouse-x', `${x}px`);
    card.style.setProperty('--mouse-y', `${y}px`);
  });
  
  const title = mkEl('div', 'title', urlTitle(path));
  const pathEl = mkEl('div', 'path', path);
  const desc = mkEl('div', 'desc', getDescription(path, tags));
  
  const tagWrap = mkEl('div', 'tags');
  for (const tag of tags) {
    const badgeClass = 'badge ' + (
      tag === 'Sentinel' ? 'b-sentinel' :
      tag === 'Peace' ? 'b-peace' :
      tag === 'Corruption' ? 'b-corrupt' :
      tag === 'Dashboard' ? 'b-dash' : ''
    );
    tagWrap.appendChild(mkEl('span', badgeClass, tag));
  }
  
  const cta = mkEl('div', 'cta');
  const openBtn = mkEl('a', '', t.open || 'Open');
  openBtn.href = path;
  openBtn.addEventListener('click', () => visit(path, tags));
  
  const favBtn = mkEl('button', '', state.favs[path] ? (t.unfavorite || 'â˜… Unfavorite') : (t.favorite || 'â˜† Favorite'));
  favBtn.addEventListener('click', () => {
    state.favs[path] = !state.favs[path];
    persist();
    favBtn.textContent = state.favs[path] ? (t.unfavorite || 'â˜… Unfavorite') : (t.favorite || 'â˜† Favorite');
  });
  
  cta.append(openBtn, favBtn);
  card.append(title, pathEl, desc, tagWrap, cta);
  
  return card;
}

function visit(path, tags) {
  if (!state.visited[path]) {
    state.visited[path] = Date.now();
    let xp = XP_PER_VISIT;
    if (tags.includes('Sentinel')) xp += XP_SENTINEL_BONUS;
    if (tags.includes('Peace')) xp += XP_PEACE_BONUS;
    if (tags.includes('Corruption')) xp += XP_CORR_BONUS;
    if (tags.includes('Dashboard')) xp += XP_DASH_BONUS;
    addXP(xp);
    persist();
  }
}

// ===== Rendering =====
const grid = document.getElementById('grid');
const featured = document.getElementById('featured');
const search = document.getElementById('search');
const filter = document.getElementById('filter');
const favBtn = document.getElementById('favoritesBtn');
const resetBtn = document.getElementById('resetProg');

function renderAll(filterTag = '', term = '', onlyFavs = false) {
  grid.innerHTML = '';
  const q = term.trim().toLowerCase();
  
  const sorted = [...DIRS].sort((a, b) => {
    const A = tagFor(a), B = tagFor(b);
    const priority = t => (
      t.includes('Sentinel') ? 0 :
      t.includes('Peace') ? 1 :
      t.includes('Corruption') ? 2 :
      t.includes('Dashboard') ? 3 : 9
    );
    const d = priority(A) - priority(B);
    return d || a.localeCompare(b);
  });
  
  for (const p of sorted) {
    const tags = tagFor(p);
    if (filterTag && !tags.includes(filterTag)) continue;
    if (onlyFavs && !state.favs[p]) continue;
    if (q && !(p.toLowerCase().includes(q) || tags.join(' ').toLowerCase().includes(q))) continue;
    grid.appendChild(cardFor(p));
  }
}

function renderFeatured() {
  featured.innerHTML = '';
  const picks = DIRS.filter(p => 
    /(^|\/)(sentinel|prime-sentinel|sentinelarc|peace|peace\-lab|peace\-ripple\-tracker|peacerippletracker|impacttracker|corruption|anti-corruption\.html)\b/i.test(p)
  );
  const top = Array.from(new Set(picks)).sort().slice(0, 8);
  for (const p of top) featured.appendChild(cardFor(p));
}

// ===== Event Handlers =====
search.addEventListener('input', () => renderAll(filter.value, search.value, favBtn.classList.contains('on')));
filter.addEventListener('change', () => renderAll(filter.value, search.value, favBtn.classList.contains('on')));

favBtn.addEventListener('click', () => {
  const t = translations[currentLang] || translations['en'];
  favBtn.classList.toggle('on');
  favBtn.textContent = favBtn.classList.contains('on') ? (t.favorites + ' (On)') : t.favorites;
  renderAll(filter.value, search.value, favBtn.classList.contains('on'));
});

resetBtn.addEventListener('click', () => {
  const t = translations[currentLang] || translations['en'];
  if (!confirm(t.confirmReset || 'Reset XP, level, visited, favorites?')) return;
  localStorage.removeItem('galactic_dir');
  state.xp = 0; state.lvl = 1; state.favs = {}; state.visited = {};
  renderHUD();
  renderFeatured();
  renderAll(filter.value, search.value, favBtn.classList.contains('on'));
});

// Language selector
document.getElementById('langSelect').addEventListener('change', (e) => {
  setLanguage(e.target.value);
});

// ===== Initialize =====
// Load saved language preference
const savedLang = localStorage.getItem('galactic_lang') || 'en';
document.getElementById('langSelect').value = savedLang;
setLanguage(savedLang);

renderHUD();
renderFeatured();
renderAll();

// PWA Service Worker
if ('serviceWorker' in navigator) {
  const sw = `
    self.addEventListener('install', e => self.skipWaiting());
    self.addEventListener('activate', e => self.clients.claim());
    self.addEventListener('fetch', e => {});
  `;
  const blob = new Blob([sw], {type: 'text/javascript'});
  const url = URL.createObjectURL(blob);
  navigator.serviceWorker.register(url).catch(() => {});
}
</script>
</body>
</html>
